webpackJsonp([15],{"8kko":function(n,e,t){var a=t("kxFB");(n.exports=t("FZ+f")(!1)).push([n.i,"\n.map[data-v-34f0d6e2] {\n  width: 100%;\n  height: 105%;\n}\n@-webkit-keyframes fadeInUp-data-v-34f0d6e2 {\n0% {\n    opacity: 0;\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: none;\n    transform: none;\n}\n}\n@keyframes fadeInUp-data-v-34f0d6e2 {\n0% {\n    opacity: 0;\n    -webkit-transform: translate3d(0, 100%, 0);\n    transform: translate3d(0, 100%, 0);\n}\n100% {\n    opacity: 1;\n    -webkit-transform: none;\n    transform: none;\n}\n}\n.amap-logo[data-v-34f0d6e2] {\n  display: none !important;\n}\n.mapInfo[data-v-34f0d6e2] {\n  width: 100%;\n  height: 3.066667rem;\n  background: #ffffff;\n  position: absolute;\n  bottom: 0;\n  box-shadow: 0.053333rem 0 0.106667rem rgba(0, 0, 0, 0.15);\n  z-index: 99;\n  animation: fadeInUp-data-v-34f0d6e2 0.3s;\n  -webkit-animation: fadeInUp-data-v-34f0d6e2 0.3s;\n  padding: 0.4rem 0.4rem 0.266667rem;\n}\n.mapInfo h2[data-v-34f0d6e2] {\n  font-size: 0.48rem;\n  text-align: left;\n  font-weight: bold;\n  color: #333333;\n  line-height: 1.8em;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.mapInfo p[data-v-34f0d6e2] {\n  font-size: 0.346667rem;\n  color: #333333;\n  padding: 0.133333rem 0;\n  line-height: 1.5em;\n}\n.mapInfo p.address[data-v-34f0d6e2] {\n  color: #999999;\n  padding-bottom: 0.266667rem;\n  border-bottom: solid 0.026667rem #ECECEC;\n}\n.mapInfo .mapBtn[data-v-34f0d6e2] {\n  width: 1.733333rem;\n  height: 1.733333rem;\n  background: url("+a(t("ZRAq"))+") no-repeat center center;\n  background-size: contain;\n  position: absolute;\n  right: 0.4rem;\n  top: -0.853333rem;\n}\n.mapInfo .mapBtn a[data-v-34f0d6e2] {\n  width: 100%;\n  height: 100%;\n  display: block;\n}",""])},JUmb:function(n,e,t){var a=t("8kko");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("12c0d3d4",a,!0,{})},LM1A:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("+aT9"),o=t.n(a),i={name:"map",data:function(){return{map:"",cityCode:"",marker:[],info:[],cPoint:[],distance:0,isShow:!1,markerIndex:-1,toast:""}},mounted:function(){var n=this;n.map=new o.a.Map("myMap",{resizeEnable:!0,features:["bg","road","point"]}),n.map.on("complete",function(){o.a.plugin(["AMap.ToolBar"],function(){n.map.addControl(new o.a.ToolBar({position:"LT",offset:new o.a.Pixel(0,30),liteStyle:!0}))}),n.showTip("正在获取当前位置..."),n.positionMap()}),n.map.on("moveend",function(){n.isShow=!1,n.markerIndex=-1;var e=n.map.getCenter();n.searchMap(e)})},methods:{handleGo:function(){var n=this.info.location,e=this.info.name;/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.GoIos(e,n):/(Android)/i.test(navigator.userAgent)?this.GoAndroid(e,n):window.location.href="https://gaode.com/dir?from[name]=我的位置&from[lnglat]="+this.cPoint.lng+","+this.cPoint.lat+"&to[name]="+e+"&to[lnglat]="+n.lng+","+n.lat+"&policy=1&type=car"},GoAndroid:function(n,e){var t=this;t.$createActionSheet({data:[{content:"高德地图"},{content:"百度地图"}],onSelect:function(a,o){t.openMapApp(e.lat,e.lng,n,o)}}).show()},GoIos:function(n,e){var t=this;t.$createActionSheet({data:[{content:"高德地图"},{content:"百度地图"},{content:"系统自带地图"}],onSelect:function(a,o){t.openMapApp(e.lat,e.lng,n,o)}}).show()},openMapApp:function(n,e,t,a){/(Android)/i.test(navigator.userAgent)?window.location.href=0===a?"androidamap://navi?sourceApplication=hyk_h5&poiname="+t+"&lat="+n+"&lon="+e+"&dev=0&style=4":"bdapp://map/navi?location="+n+","+e+"&query="+t+"&coord_type=gcj02&type=BLK":/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(window.location.href=0===a?"iosamap://navi?sourceApplication=hyk_h5&poiname="+t+"&lat="+n+"&lon="+e+"&dev=0&style=4":1===a?"baidumap://map/navi?location="+n+","+e+"&coord_type=gcj02&type=BLK":"http://maps.apple.com/?sll="+n+","+e+"&address="+t)},searchMap:function(n){var e=this;e.map.remove(e.marker),o.a.plugin("AMap.PlaceSearch",function(){var t={type:"中国石化,中国石油",city:e.cityCode,autoFitView:!1,pageSize:100,pageIndex:1},a=[n.lng,n.lat];new o.a.PlaceSearch(t).searchNearBy("",a,5e3,function(n,t){if(void 0===t.poiList)return!1;for(var a=new o.a.Icon({size:new o.a.Size(50,60),image:"../mobile/static/images/zshIcon.png",imageOffset:new o.a.Pixel(3.5,10),imageSize:new o.a.Size(43,51)}),i=new o.a.Icon({size:new o.a.Size(50,60),imageOffset:new o.a.Pixel(3.5,10),image:"../mobile/static/images/zsyIcon.png",imageSize:new o.a.Size(43,51)}),s=new o.a.Icon({size:new o.a.Size(50,60),image:"../mobile/static/images/zshIconClick.png",imageSize:new o.a.Size(50,60)}),r=new o.a.Icon({size:new o.a.Size(50,60),image:"../mobile/static/images/zsyIconClick.png",imageSize:new o.a.Size(50,60)}),c=t.poiList.pois,p=function(n){var p=c[n];e.marker[n]=new o.a.Marker({position:p.location,title:p.name,topWhenClick:!0,offset:new o.a.Pixel(-25,-55),icon:p.type.indexOf("中国石化")>-1?a:i}),e.map.add(e.marker[n]),e.marker[n].on("click",function(){e.info=t.poiList.pois[n],e.markerIndex===n?(e.marker[n].setIcon(e.info.type.indexOf("中国石化")>-1?a:i),e.isShow=!1):(c.forEach(function(n,t){e.marker[t].setIcon(c[t].type.indexOf("中国石化")>-1?a:i)}),e.markerIndex=n,e.marker[n].setIcon(e.info.type.indexOf("中国石化")>-1?s:r),e.distance=(Math.round(e.cPoint.distance(e.info.location))/1e3).toFixed(2),e.isShow=!0)})},d=0;d<c.length;d++)p(d)})})},showTip:function(n){this.toast=this.$createToast({txt:n,type:"txt",time:0}),this.toast.show()},positionMap:function(){var n=this;o.a.plugin("AMap.Geolocation",function(){var e=new o.a.Geolocation({enableHighAccuracy:!0,timeout:5e3,buttonPosition:"LT",buttonOffset:new o.a.Pixel(13,130),GeoLocationFirst:!0,panToLocation:!0});n.map.addControl(e),e.getCurrentPosition(function(e,t){"complete"===e?(n.toast.hide(),n.cityCode=t.addressComponent.citycode,n.map.setZoom(13),n.cPoint=t.position):n.showToast("获取当前位置失败~"+e)})})},showToast:function(n){this.$createToast({txt:n,type:"warn",time:1500}).show()}}},s={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"content_panel reg_panel"},[t("div",{staticClass:"page_full"},[t("div",{staticClass:"map",attrs:{id:"myMap"}}),n._v(" "),n.isShow?t("div",{staticClass:"mapInfo"},[t("h2",[n._v(n._s(n.info.name))]),n._v(" "),t("p",{staticClass:"address"},[n._v(n._s(n.info.address))]),n._v(" "),t("p",[n._v("距您"+n._s(n.distance)+"公里")]),n._v(" "),t("div",{staticClass:"mapBtn",on:{click:n.handleGo}})]):n._e()])])},staticRenderFns:[]};var r=t("VU/8")(i,s,!1,function(n){t("JUmb")},"data-v-34f0d6e2",null);e.default=r.exports},ZRAq:function(n,e,t){n.exports=t.p+"static/img/mapBtn.84932a3.png"}});