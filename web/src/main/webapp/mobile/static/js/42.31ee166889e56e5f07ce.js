webpackJsonp([42],{IBBc:function(t,n,e){var i=e("T0kW");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("7b51c4ac",i,!0,{})},OEg8:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("eOoE"),o={name:"stroe-buy",data:function(){return{items:[],price:"",total:"",num:1,id:this.$route.query.id,token:localStorage.getItem("hykToken"),isShow:!1,dialogCss:{top:"12%",bottom:"14%"},options:{swipeBounceTime:400}}},mounted:function(){this.loadPage()},watch:{num:function(t){this.total=(100*this.items.prices*t/100).toFixed(2)}},methods:{loadPage:function(){var t=this;Object(i.a)(this.HOST+"/shop/seeMallGoods",{id:t.id,token:t.token}).then(function(n){var e=n.data;if("200"!==e.code)return t.showToast(e.msg),!1;var i=e.hykMallGoods,o=i.prices;if(i.introcture=t.escape2Html(i.introcture),i.mess=t.escape2Html(i.mess),-1!==(o=o.toString()).indexOf(".")){var s=o.split(".")[0],a=o.split(".")[1];t.$set(i,"Int",s+"."),t.$set(i,"Last",""+a)}else t.$set(i,"Int",o+"."),t.$set(i,"Last","00");t.$nextTick(function(){t.items=i,t.total=i.prices.toFixed(2)})})},escape2Html:function(t){var n={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(t,e){return n[e]})},handleReduce:function(){this.num>1?this.num-=1:this.num=1},handleLayer:function(){"1"!==this.items.goodsType?this.isShow=!0:this.$router.push("/storeOrder?id="+this.id+"&num="+this.num)},handleAddmoney:function(){if(this.items.stock>this.num){if("5"===this.items.category)return void this.showToast("每个用户限领一张");this.num+=1}},handleClose:function(){this.isShow=!1},handleBuy:function(){var t=this;Object(i.a)(this.HOST+"/shop/downOrder",{goodsId:t.id,num:t.num,token:t.token},!1).then(function(n){var e=n.data;if("200"!==e.code)return t.showToast(e.msg),!1;t.$router.replace("/payGoods?goodsId="+e.hykMallOrder.id)})},showToast:function(t){this.$createToast({txt:t,type:"warn",time:1500}).show()}}},s={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content_panel reg_panel"},[e("cube-scroll",{ref:"scroll",staticClass:"page_store bodyBg",attrs:{options:t.options,data:[t.items]}},[e("div",{staticClass:"page",staticStyle:{"padding-bottom":"0"}},[e("div",{staticClass:"storeImg"},[e("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:""+t.items.img,expression:"`${items.img}`",arg:"background-image"}],staticClass:"img"})]),t._v(" "),e("div",{staticClass:"storeInfo"},[e("h2",[t._v(t._s(t.items.goodsName))]),t._v(" "),e("div",{staticClass:"desc"},[e("p",[t._v(t._s(t.items.goodsTitle))]),t._v(" "),t.items.prices>0?e("span",[t._v("￥"),e("label",[t._v(t._s(t.items.Int))]),t._v(t._s(t.items.Last))]):e("span",[e("label",{staticStyle:{"font-size":"0.5rem"}},[t._v("限免")])])])]),t._v(" "),e("div",{staticClass:"detail"},[e("h2",[e("i"),t._v("商品介绍")]),t._v(" "),e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.items.introcture)}})]),t._v(" "),e("div",{staticClass:"detail"},[e("h2",[e("i"),t._v("购买说明")]),t._v(" "),e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.items.mess)}})])])]),t._v(" "),t.isShow?e("div",{staticClass:"layer"},[e("div",{staticClass:"dialog",style:t.dialogCss},[e("div",{staticClass:"close",on:{click:t.handleClose}},[e("div",{staticClass:"icon"})]),t._v(" "),e("div",{staticClass:"title"},[t._v("\n        购买信息\n      ")]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"ticket_ul"},[e("ul",[e("li",[e("label",[t._v(t._s(t.items.goodsName))]),t._v("商品名称\n            ")]),t._v(" "),e("li",[e("label",[t._v(t._s(t.num))]),t._v("商品数量\n            ")]),t._v(" "),e("li",[e("label",[t._v(t._s(t.items.Int+t.items.Last)+"元")]),t._v("商品价格\n            ")]),t._v(" "),e("li",[e("label",[t._v(t._s(t.total)+"元")]),t._v("订单总额\n            ")]),t._v(" "),t._m(0)]),t._v(" "),e("cube-button",{staticClass:"dialog_btn",on:{click:t.handleBuy}},[t._v("确认订单")])],1)])])]):t._e(),t._v(" "),e("div",{staticClass:"buyBar"},[e("div",{staticClass:"tool"},[e("p",[t._v("商品库存："+t._s(t.items.stock))]),t._v(" "),e("div",{staticClass:"select"},[e("div",{staticClass:"reduce btn",on:{click:t.handleReduce}},[e("i")]),t._v(" "),e("div",{staticClass:"num"},[t._v(t._s(t.num))]),t._v(" "),e("div",{staticClass:"add btn",on:{click:t.handleAddmoney}},[e("i")])])]),t._v(" "),e("dl",{on:{click:t.handleLayer}},[e("dt",[t._v("立即购买")]),t._v(" "),e("dd",[t._v("￥"+t._s("5"===t.items.category?"0.00（运费9.9）":t.total))])]),t._v(" "),e("div",{staticClass:"clear"})])],1)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("li",[n("label",[this._v("虚拟商品，系统自动发货")]),this._v("收货地址\n            ")])}]};var a=e("VU/8")(o,s,!1,function(t){e("IBBc")},null,null);n.default=a.exports},T0kW:function(t,n,e){var i=e("kxFB");(t.exports=e("FZ+f")(!1)).push([t.i,"\n.ticket_ul {\n  width: 100%;\n  height: auto;\n}\n.ticket_ul ul li {\n  width: 100%;\n  height: auto;\n  font-size: 0.373333rem;\n  color: #999;\n  text-align: left;\n  line-height: 1;\n  padding: 0.453333rem 0;\n  border-bottom: solid 0.026667rem #ebebeb;\n}\n.ticket_ul ul li label {\n  float: right;\n  color: #333;\n  font-size: 0.4rem;\n}\n.ticket_ul ul li:last-child {\n  border: none;\n}\n.buyBar {\n  width: 100%;\n  position: fixed;\n  height: 1.6rem;\n  bottom: 0;\n  z-index: 888;\n  background: #ffffff;\n  box-shadow: 0.026667rem 0 0.213333rem rgba(0, 0, 0, 0.05);\n}\n.buyBar .tool {\n  width: 66%;\n  height: auto;\n  padding-left: 0.3rem;\n  position: relative;\n  float: left;\n}\n.buyBar .tool p {\n  font-size: 0.346667rem;\n  color: #999999;\n  height: 0.96rem;\n  line-height: 0.96rem;\n  text-align: center;\n  padding: 0.32rem 0 0.32rem 3.093333rem;\n}\n.buyBar .tool .select {\n  width: 3.093333rem;\n  height: 0.96rem;\n  position: absolute;\n  top: 0.32rem;\n  left: 0.3rem;\n  border: solid 1PX #dddddd;\n  border-radius: 0.48rem;\n}\n.buyBar .tool .select .btn {\n  width: 0.933333rem;\n  height: 0.906667rem;\n  line-height: 0.906667rem;\n  position: relative;\n  float: left;\n}\n.buyBar .tool .select .btn i {\n  width: 0.346667rem;\n  height: 0.346667rem;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  margin-top: -0.186667rem;\n  margin-left: -0.186667rem;\n  background: url("+i(e("xeAE"))+") center center no-repeat;\n  background-size: contain;\n}\n.buyBar .tool .select .num {\n  width: 1.093333rem;\n  height: 0.906667rem;\n  font-size: 0.48rem;\n  color: #333333;\n  background: #eeeeee;\n  text-align: center;\n  float: left;\n  line-height: 0.906667rem;\n}\n.buyBar .tool .select .btn.add i {\n  background: url("+i(e("EeGD"))+") no-repeat center center;\n  background-size: contain;\n}\n.buyBar dl {\n  width: 34%;\n  height: 100%;\n  background: #FF4456;\n  float: right;\n  padding: 0.213333rem 0;\n  color: rgba(255, 255, 255, 0.95);\n}\n.buyBar dl dt {\n  font-size: 0.48rem;\n  line-height: 1.4em;\n  letter-spacing: 0.05rem;\n}\n.buyBar dl dd {\n  font-size: 0.373333rem;\n  line-height: 1.4em;\n}\n.page .storeImg {\n  width: 100%;\n  height: 8rem;\n  background: #ffffff;\n  border-bottom: solid 0.026667rem #ebebeb;\n  padding: 1rem 0;\n}\n.page .storeImg .img {\n  width: 100%;\n  height: 100%;\n  background-color: #ffffff;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center center;\n}\n.page .detail {\n  width: 100%;\n  height: auto;\n  background: #ffffff;\n  padding: 0.4rem 0.4rem;\n  margin-bottom: 0.373333rem;\n}\n.page .detail h2 {\n  font-size: 0.426667rem;\n  color: #333333;\n  text-align: left;\n  padding-bottom: 0.32rem;\n  font-weight: bold;\n  margin-bottom: 0.06rem;\n  clear: both;\n}\n.page .detail h2 i {\n  width: 0.08rem;\n  height: 0.4rem;\n  background: #FF4456;\n  display: inline-block;\n  border-radius: 0.1rem;\n  margin-right: 0.15rem;\n  vertical-align: -0.04rem;\n}\n.page .detail .con {\n  width: 100%;\n  height: auto;\n  text-align: left;\n  line-height: 1.5em;\n  font-size: 0.373333rem;\n  color: #666666;\n}\n.page .detail .con p {\n  text-align: left;\n  line-height: 1.5em;\n  font-size: 0.373333rem;\n  color: #666666;\n  padding: 0.106667rem 0;\n}\n.page .detail .con img {\n  width: 100% !important;\n  height: auto !important;\n}\n.page .storeInfo {\n  width: 100%;\n  height: auto;\n  background: #ffffff;\n  margin-bottom: 0.373333rem;\n  padding: 0.4rem 0.4rem;\n}\n.page .storeInfo h2 {\n  text-align: left;\n  font-size: 0.48rem;\n  line-height: 1.4em;\n  padding-bottom: 0.213333rem;\n}\n.page .storeInfo .desc {\n  width: 100%;\n  position: relative;\n  height: auto;\n}\n.page .storeInfo .desc p {\n  width: 70%;\n  font-size: 0.4rem;\n  color: #999999;\n  line-height: 1.5em;\n}\n.page .storeInfo .desc span {\n  position: absolute;\n  right: 0;\n  top: 0.053333rem;\n  font-size: 0.373333rem;\n  color: #FF4456;\n}\n.page .storeInfo .desc span label {\n  font-size: 0.64rem;\n}",""])}});