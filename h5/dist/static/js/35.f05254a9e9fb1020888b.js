webpackJsonp([35],{"1yJh":function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n.ticket_ul {\n  width: 100%;\n  height: auto;\n}\n.ticket_ul ul li {\n  width: 100%;\n  height: auto;\n  font-size: 0.373333rem;\n  color: #999;\n  text-align: left;\n  line-height: 1;\n  padding: 0.48rem 0;\n  border-bottom: solid 0.026667rem #ebebeb;\n}\n.ticket_ul ul li label {\n  float: right;\n  color: #333;\n  font-size: 0.4rem;\n}\n.ticket_ul ul li:last-child {\n  border: none;\n}\n.ticket_page {\n  color: #333;\n  padding: 0.266667rem 0.266667rem 0.8rem 0.266667rem !important;\n}\n.ticket_page .cube-input-append {\n  display: none;\n}\n.ticket_page .cube-input::after {\n  border: none !important;\n}\n.ticket_page .submit-button {\n  padding: 1.333333rem 0.8rem 0 0.8rem;\n}\n.ticket_page .submit-button button {\n  letter-spacing: 0.106667rem;\n}\n.ticket_page .inline {\n  width: 100%;\n  display: inline-block;\n}\n.ticket_page .eyeNo input {\n  letter-spacing: 0.08rem;\n}\n.ticket_page svg {\n  width: 100%;\n  height: 100%;\n}\n.ticket_page .select_ticket {\n  width: 100%;\n  padding: 0.266667rem 0;\n  border-radius: 0.133333rem;\n  font-size: 0.373333rem;\n  margin-bottom: 0.4rem;\n  color: #666;\n}\n.ticket_page .select_ticket p {\n  line-height: 1;\n  font-size: 0.4rem;\n  color: #333333;\n  padding: 0.133333rem 0.4rem 0.266667rem 0.4rem;\n  border-bottom: solid 0.026667rem #EEEEEE;\n}\n.ticket_page .select_ticket p a {\n  float: right;\n  color: #FF4456;\n  font-size: 0.373333rem;\n}\n.ticket_page .select_ticket ul {\n  width: 100%;\n  height: auto;\n  padding: 0 0.2rem;\n}\n.ticket_page .select_ticket ul li {\n  width: 50%;\n  height: auto;\n  padding: 0 0.2rem;\n  float: left;\n}\n.ticket_page .select_ticket ul li .card {\n  width: 100%;\n  height: auto;\n  position: relative;\n  overflow: hidden;\n  padding-top: 0.4rem;\n}\n.ticket_page .select_ticket ul li .card svg {\n  width: 1.413333rem;\n  height: 1.36rem;\n  fill: #eeeeee;\n}\n.ticket_page .select_ticket ul li .card p {\n  font-size: 0.373333rem;\n  color: #cccccc;\n  padding: 0.133333rem;\n  text-align: center;\n  letter-spacing: 0.026667rem;\n  border: none;\n}\n.ticket_page .select_ticket ul li .card.active svg {\n  fill: #FF4456;\n}\n.ticket_page .select_ticket ul li .card.active p {\n  color: #FF4456;\n}\n.ticket_page .tip {\n  text-align: center;\n  color: #FF0000;\n  font-size: 0.32rem;\n}\n.ticket_page .ticket_info {\n  padding: 0.133333rem 0.4rem;\n  margin-bottom: 0.4rem;\n  border-radius: 0.133333rem;\n}\n.ticket_page .ticket_info .item {\n  width: 100%;\n  height: auto;\n  position: relative;\n  padding: 0.16rem 0 0.16rem 1.866667rem;\n  border-bottom: solid 0.026667rem #ebebeb;\n}\n.ticket_page .ticket_info .item label {\n  width: 1.866667rem;\n  height: auto;\n  display: inline-block;\n  text-align: left;\n  font-size: 0.373333rem;\n  color: #666;\n  position: absolute;\n  left: 0;\n  top: 0.16rem;\n  padding: 0.373333rem 0;\n}\n.ticket_page .ticket_info .item input {\n  font-size: 0.4rem;\n  color: #333;\n}\n.ticket_page .ticket_info .item:last-child {\n  border: none;\n}",""])},kVnD:function(e,t,n){var i=n("1yJh");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("4bf04322",i,!0,{})},"qME+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("+cKO"),a=n("sWDS"),s=n("eOoE"),c={name:"addTicket",data:function(){return{options:{swipeBounceTime:400},oilType:1,token:localStorage.getItem("hykToken"),phone:"",cardId:"",cardLength:19,recardId:"",cardNum:"",name:"",isShow:!1,eye:{open:!0,reverse:!1},dialogCss:{top:"17%",bottom:"17%"},showTip:!0}},validations:{phone:{required:i.required,phone:a.d},cardNum:{required:i.required,oliCard:a.b},name:{required:i.required}},watch:{cardId:function(e){/\S{5}/.test(e)&&(this.cardId=e.replace(/\s/g,"").replace(/(.{4})/g,"$1 ")),this.cardNum=e.replace(/\s+/g,"")},recardId:function(e){/\S{5}/.test(e)&&(this.recardId=e.replace(/\s/g,"").replace(/(.{4})/g,"$1 "))}},mounted:function(){this.loadPage()},methods:{loadPage:function(){var e=this;Object(s.a)(this.HOST+"/mine/oilCard",{token:e.token}).then(function(t){var n=t.data,i=n.list;if("200"!==n.code)return e.showToast(n.msg),!1;i.length>0&&(e.showTip=!1)})},listenBlur:function(){setTimeout(function(){window.scrollTo(0,0)},100)},showCard:function(){this.eye.open=!0},hideCard:function(){this.eye.open=!1},checkPhone:function(){var e=this.$v;return e.$touch(),e.phone.required?!!e.phone.phone||(this.showToast("手机号不正确"),!1):(this.showToast("请输入手机号"),!1)},checkCardNum:function(){var e=this.$v;if(e.$touch(),!e.cardNum.required)return this.showToast("请输入加油卡号"),!1;if(!e.cardNum.oliCard)return this.showToast("加油卡号不正确"),!1;if(1===this.oilType){if(this.cardNum.length<16)return this.showToast("中石化卡号为16位"),!1}else if(this.cardNum.length<19)return this.showToast("中石油卡号为19位"),!1;return!0},checkRecardNum:function(){return this.cardId===this.recardId||(this.showToast("加油卡号不一致"),!1)},checkName:function(){var e=this.$v;return e.$touch(),!!e.name.required||(this.showToast("请输入持卡人姓名"),!1)},handleLayer:function(){return!!this.checkPhone()&&(!!this.checkCardNum()&&(!!this.checkRecardNum()&&(!!this.checkName()&&void(this.isShow=!0))))},handleSubmit:function(){var e=this;Object(s.a)(this.HOST+"/mine/addOilCard",{oilType:e.oilType,phone:e.phone,cardNum:e.cardNum,name:e.name,token:e.token},!1).then(function(t){var n=t.data;if("200"!==n.code)return e.showToast(n.msg),!1;e.$router.replace("/home")})},selectType:function(e){switch(this.oilType=e,this.cardId="",this.recardId="",this.cardNum="",e){case 1:this.cardLength=19;break;case 2:this.cardLength=23}},handleClose:function(){this.isShow=!1},showToast:function(e){this.$createToast({txt:e,type:"warn",time:1500}).show()}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content_panel"},[n("cube-scroll",{ref:"scroll",staticClass:"page_full bodyBg",attrs:{options:e.options}},[n("div",{staticClass:"page ticket_page"},[n("div",{staticClass:"select_ticket white"},[n("p",[n("router-link",{attrs:{to:"/drawCard"}},[e._v("免费领卡")]),e._v("选择油卡类型")],1),e._v(" "),n("ul",[n("li",[n("div",{staticClass:"card",class:{active:1===e.oilType},on:{click:function(t){e.selectType(1)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#zhongshiyou"}})]),e._v(" "),n("p",[e._v("中国石油")])])]),e._v(" "),n("li",[n("div",{staticClass:"card",class:{active:2===e.oilType},on:{click:function(t){e.selectType(2)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#zhongshihua"}})]),e._v(" "),n("p",[e._v("中国石化")])])]),e._v(" "),n("div",{staticClass:"clear"})])]),e._v(" "),n("div",{staticClass:"ticket_info white"},[n("div",{staticClass:"item"},[n("label",[e._v("手机号码")]),e._v(" "),n("cube-input",{staticClass:"inline",attrs:{type:"tel",maxlength:11,placeholder:"请输入持卡人号码"},on:{blur:e.listenBlur},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),n("div",{staticClass:"item"},[n("label",[e._v("加油卡号")]),e._v(" "),n("input",{staticStyle:{position:"absolute",top:"-50px",opacity:"0",filter:"alpha(opacity=0)"},attrs:{type:"password"}}),e._v(" "),n("cube-input",{staticClass:"inline",class:{eyeNo:e.isShow},attrs:{type:"password",maxlength:e.cardLength,eye:e.eye,placeholder:"请输入您的加油卡号"},on:{focus:e.showCard,blur:e.listenBlur},model:{value:e.cardId,callback:function(t){e.cardId=t},expression:"cardId"}})],1),e._v(" "),n("div",{staticClass:"item"},[n("label",[e._v("确认卡号")]),e._v(" "),n("cube-input",{staticClass:"inline",attrs:{type:"text",maxlength:e.cardLength,placeholder:"请确认您的加油卡号"},on:{focus:e.hideCard,blur:e.listenBlur},model:{value:e.recardId,callback:function(t){e.recardId=t},expression:"recardId"}})],1),e._v(" "),n("div",{staticClass:"item"},[n("label",[e._v("用户姓名")]),e._v(" "),n("cube-input",{staticClass:"inline",attrs:{type:"text",placeholder:"请输入持卡人姓名"},on:{blur:e.listenBlur},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),n("div",{staticClass:"submit-button"},[n("cube-button",{on:{click:e.handleLayer}},[e._v("添加卡片")])],1)])]),e._v(" "),e.isShow?n("div",{staticClass:"layer"},[n("div",{staticClass:"dialog",style:e.dialogCss},[n("div",{staticClass:"close",on:{click:e.handleClose}},[n("div",{staticClass:"icon"})]),e._v(" "),n("div",{staticClass:"title"},[e._v("\n        加油卡信息\n      ")]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"ticket_ul"},[n("ul",[n("li",[n("label",[e._v(e._s(e.name))]),e._v("持卡人姓名\n            ")]),e._v(" "),n("li",[n("label",[e._v(e._s(1===e.oilType?"中国石油":"中国石化"))]),e._v("加油卡类型\n            ")]),e._v(" "),n("li",[n("label",[e._v(e._s(e.cardId))]),e._v("加油卡号\n            ")]),e._v(" "),n("li",[n("label",[e._v(e._s(e.phone))]),e._v("手机号码\n            ")])]),e._v(" "),n("cube-button",{staticClass:"dialog_btn",on:{click:e.handleSubmit}},[e._v("确认添加")])],1)])])]):e._e()],1)},staticRenderFns:[]};var r=n("VU/8")(c,o,!1,function(e){n("kVnD")},null,null);t.default=r.exports}});